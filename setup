#!/bin/bash

# Set up XDG_CONFIG_HOME
export XDG_CONFIG_HOME="$HOME"/.config
mkdir -p "$XDG_CONFIG_HOME"

#ln -sf "$PWD/nvim" "$XDG_CONFIG_HOME"/nvim
#ln -sf "$PWD/lazygit" "$XDG_CONFIG_HOME"/lazygit

#sudo mkdir /home/linuxbrew/
#sudo chown $USER:users /home/linuxbrew/
#
#NONINTERACTIVE=1 /bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"
#NONINTERACTIVE=1 /bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"
#
#/home/linuxbrew/.linuxbrew/bin/brew shellenv >>~/.profile

#packages=(
#  fd
#  ripgrep
#  fish
#  node
#  httpyac
#  lazygit
#  git-delta
#  luajit
#  neovim
#)
#
## Iterate over the array and install each package
#for package in "${packages[@]}"; do
#  echo "Installing $package..."
#  /home/linuxbrew/.linuxbrew/bin/brew install "$package"
#done
#
#echo "All packages have been installed."

ln -s "$HOME"/dotfiles/vscode/settings.json "$HOME"/.vscode-server/data/Machine/settings.json

extensions=(
  "eamodio.gitlens"
  "anweber.vscode-httpyac"
  "ms-azuretools.vscode-docker"
  "vivaxy.vscode-conventional-commits"
  "cweijan.vscode-mysql-client2"
  "GitHub.copilot"
  "phpactor.vscode-phpactor"
  "xdebug.php-debug"
  "EditorConfig.EditorConfig"
  "recca0120.vscode-phpunit"
  "SanderRonde.phpstan-vscode"
)

for extension in "${extensions[@]}"; do
  # Check if extension is installed
  if code --list-extensions | grep -q "$extension"; then
    echo "$extension is already installed"
    continue
  fi
  code --install-extension "$extension"
done
